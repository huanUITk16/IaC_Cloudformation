version: 0.2

phases:
  install:
    on-failure: ABORT
    runtime-versions:
      python: 3.8
    commands:
      - echo "Installing cfn-lint..."
      - pip install --upgrade pip
      - pip install cfn-lint

  build:
    commands: 
      - echo "Scanning EC2 module..."
      - cfn-lint -t .\modules\EC2\fragments\ec2module.yml --info
      - echo "Successfully!"
      - echo "Scanning Security Group module..."
      - cfn-lint -t .\modules\Security_group\fragments\sgmodule.yml --info
      - echo "Successfully!"
      - echo "Scanning VPC module..."
      - cfn-lint -t .\modules\VPC\fragments\vpcmodule.yml --info
      - echo "Successfully!"
      - echo "Scanning Nestedstack.yml..."
      - cfn-lint -t .\Nestedstack.yml
      - echo "Successfully!"
